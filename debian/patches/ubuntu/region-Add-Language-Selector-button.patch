From: Jeremy Bicha <jbicha@ubuntu.com>
Date: Thu, 14 Sep 2017 09:23:42 -0400
Subject: region: Add Language Selector button

Workaround for https://launchpad.net/bugs/1631750

--- a/panels/system/region/cc-region-page.c
+++ b/panels/system/region/cc-region-page.c
@@ -574,6 +574,25 @@ setup_language_section (CcRegionPage *se
 }
 
 static void
+show_language_support (CcRegionPage *self)
+{
+        g_autoptr(GAppInfo) app_info = NULL;
+        g_autoptr(GdkAppLaunchContext) ctx = NULL;
+        g_autoptr(GError) error = NULL;
+
+        app_info = G_APP_INFO (g_desktop_app_info_new ("gnome-language-selector.desktop"));
+
+        if (app_info == NULL) {
+                g_warning ("Failed to launch language-selector: couldn't create GDesktopAppInfo");
+                return;
+        }
+
+        ctx = gdk_display_get_app_launch_context (gdk_display_get_default ());
+        if (!g_app_info_launch (app_info, NULL, G_APP_LAUNCH_CONTEXT (ctx), &error))
+                g_warning ("Failed to launch language-selector: %s", error->message);
+}
+
+static void
 update_login_region (CcRegionPage *self)
 {
         const gchar *region = get_effective_region (self, SYSTEM);
@@ -846,6 +865,7 @@ cc_region_page_class_init (CcRegionPageC
         gtk_widget_class_bind_template_callback (widget_class, on_user_formats_row_activated_cb);
         gtk_widget_class_bind_template_callback (widget_class, on_user_language_row_activated_cb);
         gtk_widget_class_bind_template_callback (widget_class, restart_now);
+        gtk_widget_class_bind_template_callback (widget_class, show_language_support);
 }
 
 static void
--- a/panels/system/region/cc-region-page.blp
+++ b/panels/system/region/cc-region-page.blp
@@ -22,6 +22,20 @@ template $CcRegionPage: Adw.NavigationPa
         description: _("The language setting is used for interface text and web pages. Formats are used for numbers, dates, and currencies.");
 
         Adw.PreferencesGroup {
+          title: _("System");
+          Adw.ActionRow {
+            title: _("Manage _Installed Languages");
+            use-underline: true;
+            activatable: true;
+            activated => $show_language_support(template);
+            Image {
+                valign: center;
+                icon-name: "go-next-symbolic";
+            }
+          }
+        }
+
+        Adw.PreferencesGroup {
           title: _("Your Account");
 
           $CcListRow language_row {
