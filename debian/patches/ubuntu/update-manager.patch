From: Robert Ancell <robert.ancell@canonical.com>
Date: Mon, 3 Feb 2020 14:23:34 +1300
Subject: info-overview: Show updates in update-manager instead of GNOME
 Software

---
 panels/system/cc-system-panel.c | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/panels/system/cc-system-panel.c b/panels/system/cc-system-panel.c
index f28a963..5bebe5e 100644
--- a/panels/system/cc-system-panel.c
+++ b/panels/system/cc-system-panel.c
@@ -87,11 +87,18 @@ gpk_update_viewer_exists (void)
   return path != NULL;
 }
 
+static gboolean
+update_manager_exists (void)
+{
+  g_autofree gchar *path = g_find_program_in_path ("update-manager");
+  return path != NULL;
+}
+
 static gboolean
 show_software_updates_group (CcSystemPanel *self)
 {
   return (gnome_software_exists () && gnome_software_allows_updates ()) ||
-         gpk_update_viewer_exists ();
+         gpk_update_viewer_exists () || update_manager_exists();
 }
 
 static void
@@ -101,7 +108,12 @@ cc_system_page_open_software_update (CcSystemPanel *self)
   gboolean ret;
   char *argv[3];
 
-  if (gnome_software_exists ())
+  if (update_manager_exists ())
+    {
+      argv[0] = "update-manager";
+      argv[1] = NULL;
+    }
+  else if (gnome_software_exists ())
     {
       argv[0] = "gnome-software";
       argv[1] = "--mode=updates";
